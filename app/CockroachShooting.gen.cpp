/********************************************
 ** This file is generated by AppGenerator **
 ********************************************/

#include "CockroachShooting.gen.hpp"

#include <chrono>
#include <thread>
#include <iostream>
#include <vector>

Cockroach::Cockroach(uint16_t x, uint16_t y, uint16_t vx, uint16_t vy)
    : x(x)
    , y(y)
    , vx(vx)
    , vy(vy)
{

}

void Cockroach::move()
{
    this->x += this->vx;
    this->y += this->vy;
}

void Cockroach::draw()
{
    tll::drawRect(this->x - 2, this->y - 2, 4, 3, tll::Color(128, 0, 0));
}

CockroachShooting::CockroachShooting()
{
    std::cout << "Create CockroachShooting instance." << std::endl;
}

CockroachShooting::~CockroachShooting()
{
    delete this->cockroach;
    this->cockroach = nullptr;

    std::cout << "Delete CockroachShooting instance." << std::endl;
}

void CockroachShooting::init()
{
    this->cockroach = new Cockroach(1, 10, 0, 0);
}

void CockroachShooting::run()
{
    static uint64_t frame = 0;

    if (this->cockroach)
        this->cockroach->move();

    tll::clear();
    tll::drawRect(0, 0, 64, 32, tll::Palette::White);

    if (this->cockroach)
        this->cockroach->draw();

    std::this_thread::sleep_for(std::chrono::milliseconds(33));
}

void CockroachShooting::terminate()
{

}

void CockroachShooting::onTouched(tll::TouchInfo ti)
{
    this->cockroach->vx = 1;
}

void CockroachShooting::onMoved(tll::TouchInfo ti)
{

}

void CockroachShooting::onReleased(tll::TouchInfo ti)
{

}
